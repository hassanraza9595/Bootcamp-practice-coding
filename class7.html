<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script>

// Class 7  -----> Callbacks, Promises, Async/Await

// Promises

// let p = new Promise((resolve, reject)=> {
//     let a = 1+3;
//     if ( a === 2){
//      resolve('succeed'); }

//     else {
//         reject('Failed');
//     } 
// }
// )    

// p.then((message)=>{
//     console.log("It's resolved and " + message)
// }).catch((message)=>{
//     console.log("IT's rejected and " + message);
// })

//  Callbacks

// function watchSuitsCallback(callback, errorCallback) {

//     let userLeft = false
//     let userWatchingSuits = true

//     if(userLeft) {
//         errorCallback({
//             name: 'Episode Completed',
//             message: 'Shit'
//         })
//     }

//     else if (userWatchingSuits) {
//         errorCallback({
//             name: 'User Watching Suits',
//             message: 'with Harvey'
//         })
//     }

//     else {
//         callback('Awesome')
//     }
// }

// watchSuitsCallback(message => {
//     console.log(message)
// }, error => {
//     console.log(error.name+ ' ' + error.message)
// })

// const hello = message => {
//     console.log(message);
// }

// let newMessage = hello('Hello World');

// console.log(newMessage)

// Now we will take the same example using promises:


// function watchSuitsCallback(callback, errorCallback) {

// let userLeft = false
// let userWatchingSuits = false

// return new Promise((resolve, reject)=> 
// {
//     if(userLeft){
//         reject({
//             name: 'Episode Completed',
//             message: 'Shit'
//         })
//     }
//     else if (userWatchingSuits){
//         reject({
//             name: 'User Watching Suits',
//             message: 'with Harvey'
//         })
//     }
//     else {
//         resolve('Awesome');
//     }
// })
// }

// watchSuitsCallback().then(message=>{
//     console.log(message)
// }).then(
//     console.log('3')
// ).then(console.log('2')).catch(error=>{
//     console.log(error.name+ ' '+ error.message)
// })


// function makeRequest(loaction){
//     return new Promise((resolve, reject)=>{

//         console.log(`making request to ${loaction}`)

//         if(loaction == 'google'){
//             resolve('google says hello');
//         }
//         else{
//             reject('we can only talk to google');
//         }

//     })
// }

// function processRequest(response) {

//     return new Promise((resolve, reject)=> {
//         console.log('Processing Response')
//         resolve(`Extra Info ${response}`)
//     })
// }


// makeRequest('google').then(response=>{
//     console.log('Response Received')
//     return processRequest(response)
// }).then(processResponse=>{
//     console.log(processResponse)
// }).catch(err=>{
//     console.log(err)
// })


// async function doWork() {

// try{
//       const response = await  makeRequest('google');
//    //   console.log(response)
//       console.log('Response Received');
//       const processResponse = await processRequest(response);
//       console.log(processResponse);
// }
// catch(err){
//     console.log(err);
// }

// }

// doWork()


// expected output :

// making request to google
// Response Received
// Processing Response
// Extra Info Google says hello


// async function f() {

// let promise = new Promise((resolve, reject) => {
//   setTimeout(() => resolve("done!"), 10000)
// });

// for(i = 1; i<=10; i++){
//     console.log(i);
// }

// let result = await promise; // wait until the promise resolves (*)

// console.log(result); // "done!"
// }

// f();


//                    Fetch API

// const api = fetch('https://jsonplaceholder.typicode.com/todos/1')
// .then(function get(message){
// console.log(message);
// }
// )

// get api, getting data from server

async function fetchAPI(){

    const api = await fetch('https://api.github.com/users/hassanraza9595/repos'); // fetch return a promise
  //  console.log(api); 
    const readAble = await api.json();
//console.log(readAble[0]);
    console.log(readAble.length)
    for(i = 1; i<=readAble.length; i++){
        console.log(readAble[i].name);
    }
   // console.log(readAble.id);

}

fetchAPI();

// post api, sending data to server

// async function postAPI(){

//     const sending  = await fetch ('https://jsonplaceholder.typicode.com/posts',{
//         method: 'POST',
//         body: JSON.stringify({
//             name: 'Hassan',
//             roll_no: 46,
//             batch: '2K18',
//         }),
//         headers: {
//             "Content-type": "application/json; charset=UTF-8"
//         }
//     })

//     console.log(sending);
//     const readReceived = await sending.json();
//     console.log(readReceived);
// }

// postAPI();


// async function newPost(){
//     const sending = await fetch('https://jsonplaceholder.typicode.com/posts/1',{
//         method: 'PUT',
//         body: JSON.stringify({
//             name: 'Asif',
//             roll_no: 50,
//             batch: '2K19'
//         }),
//         headers: {
//             "Content-type": "application/json; charset=UTF-8"
//         }
//     })

//     const received = await sending.json();
//     console.log(received, 'Received');
// }

// newPost();

</script>
</body>
</html>